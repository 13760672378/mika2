<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="css/sy.css"/>
	</head>
	<body>
		<div class="mor">
			<ul id="lb">
				<li>
					<!--头部-->
					<div class="titile">

						<div class="titile-box clear">
							<a class="titile-logo" href="sy.html"></a>
							<ul class="title-nav">
								<li>
						            <a href="sy.html">首页</a>
						            <span></span>
								</li>		
								<li>
									<a href="f1.html">衣服</a>
									<span></span>
								</li>
								<li>
									<a href="f2.html">T恤·衬衫</a>
									<span></span>
								</li>
								<li>
									<a href="f3.html">鞋袜</a>
									<span></span>
								</li>
								<li>
									<a href="f4.html">包袋</a>
									<span></span>
								</li>
								<li>
									<a href="f5.html">美酒</a>
									<span></span>
								</li>
								<li>
									<a href="f6.html">美食</a>
									<span></span>
								</li>
								<li>
									<a href="f7.html">生活</a>
									<span></span>
								</li>
							</ul>
							<div class="search">
								<input type="text" name="" id="" value="" />
							    <input type="submit" name="" id="" value="" />
							</div>
							<a id="car" href="shopping.html"><span id="mun">0</span></a>
							<div class="end-box">
								<a id="zc" href="zuce.html">注册</a>
								<a id="dl">登录</a>
							</div>
						</div>
					</div>
				     <!--   轮播-->
					<div class="c-cut">
						<ul class="cut">		
						<li class="act"></li>
						<li></li>
						<li></li>
						<li></li>
						</ul>
						<div class="cut-i">
							<i id="cutl"></i>
							<i id="cutr"></i>
					    </div>
					</div>
				</li>
				<li>
					<div class="part">
						<p><b>外衣推荐</b></p>
						<p><b>Jacket recommendation</b></p>
					</div>
					<ul class="part2">	
						
					</ul>
					
				</li>
				<li>
					<div class="part">
						<p><b>T恤·衬衫推荐</b></p>
						<p><b>T-shirt&Shirt recommendation</b></p>
					</div>
					<ul class="part3">	
						
					</ul>
				</li>
				<li>
					<div class="part">
						<p><b>鞋袜推荐</b></p>
						<p><b>Footwear recommendation</b></p>
					</div>
					<ul class="part4">	
						
					</ul>
				</li>
				<li>
					<div class="part">
						<p><b>包袋推荐</b></p>
						<p><b>Bag recommendation</b></p>
					</div>
					<ul class="part5">	
						
					</ul>
				</li>
				<li>
					<div class="part">
						<p><b>美酒推荐</b></p>
						<p><b>Wine recommendation</b></p>
					</div>
					<ul class="part6">	
						
					</ul>
				</li>
				<li>
					<div class="part">
						<p><b>美食推荐</b></p>
						<p><b>Foot recommendation</b></p>
					</div>
					<ul class="part7">	
						
					</ul>
			    </li>
			    <li>
					<div class="part">
						<p><b>生活用品推荐</b></p>
						<p><b>Recommendation of daily necessities</b></p>
					</div>
					<ul class="part8">	
						
					</ul>
			    </li>
				
			</ul>
		</div>
		<ul class="cir">
			<li style="background: whitesmoke; box-shadow:0 0 0 2px white;"></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
		</ul>
		<script src="js/tools.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">var mor = document.getElementsByClassName("mor")[0];	
			var box = document.getElementById("lb");
			var boxLi = box.children;
			var part = document.getElementsByClassName("part")[0];
			var mu = document.getElementById("mun");
			mu.innerText = localStorage.length;
			fun();
			window.onresize=fun;
		    function fun(){
				var fff = window.innerHeight;
				mor.style.height=mun+"px";		
				mor.style = "height:" + fff + "px;";
			    Array.prototype.forEach.call(boxLi,function(ele){
				     ele.style.height=fff+"px";
			    })
			}

			var dl =document.getElementById("dl");
			var zc =document.getElementById("zc");
			var t=null;
			   dl.onclick=function(){
			   	  if (Cookie.has("id")) {
			   	  	    t= Cookie.get("id");
			   	  	    zc.innerText="您好"+t;
			   	  	    dl.innerText = "退出";
			   	  }else{
			   	  	 location.href="zy.html";
			   	  }
			   }; 
			       if (Cookie.has("id")) {
			   	  	    t= Cookie.get("id");
			   	  	    zc.innerText="您好"+t;
			   	  	    dl.innerText = "退出";
			          }
			var ind = 0,
				timer = null,
				flag = true;
			window.addEventListener('mousewheel', ScrollDo);
			window.addEventListener('DOMMouseScroll', ScrollDo);
			
			//获取数据
			function getarr(callback) {
				var xhr = new XMLHttpRequest();
				xhr.open("GET", "json/zz.json", true);
				xhr.onreadystatechange = function() {
					if(xhr.readyState == 4 && xhr.status == 200) {
						var a = JSON.parse(xhr.responseText);
						var arr = a["list"];
						//	                    callback(a)
						//					    console.log(arr);
						callback(arr);
					}
				}
				xhr.send();
			}
			
			getarr(ppp);
			var part2 = document.getElementsByClassName("part2")[0];
			var part3 = document.getElementsByClassName("part3")[0];
			var part4 = document.getElementsByClassName("part4")[0];
			var part5 = document.getElementsByClassName("part5")[0];
			var part6 = document.getElementsByClassName("part6")[0];
			var part7 = document.getElementsByClassName("part7")[0];
			var part8 = document.getElementsByClassName("part8")[0];
			console.log(part8);
			
			function ppp(arr) {
				arr["p1"].forEach(function(ele) {
					//创建li
					var li = document.createElement("li");
					var photo = document.createElement("i");
					//相片
					photo.className = "photo";
					photo.style = "background:url(" + ele.pic + "); background-size:100% 366px;"
					//名字
					var cname = document.createElement("p");
					cname.className = "cen-name";
					cname.innerText = ele.name;
					//价格
					var cmon = document.createElement("p");
					cmon.className = "cen-money";
					//原价
					var csp1 = document.createElement("span");
					csp1.innerHTML = "￥" + ele.ymon;
					//原价
					var csp2 = document.createElement("span");
					csp2.innerHTML = "￥" + ele.xmon;
					li.appendChild(photo);
					li.appendChild(cname);
					li.appendChild(cmon);
					cmon.appendChild(csp1);
					cmon.appendChild(csp2);
					li.setAttribute("pid", ele.id);
					li.onclick = function() {
						var z = this.getAttribute("pid");
						location.href = "xi2.html?pid=" + z;
					}
					part2.appendChild(li);
				});
			
				arr["p2"].forEach(function(ele) {
					//创建li
					var li = document.createElement("li");
					var photo = document.createElement("i");
					//相片
					photo.className = "photo";
					photo.style = "background:url(" + ele.pic + "); background-size:100% 366px;"
					//名字
					var cname = document.createElement("p");
					cname.className = "cen-name";
					cname.innerText = ele.name;
					//价格
					var cmon = document.createElement("p");
					cmon.className = "cen-money";
					//原价
					var csp1 = document.createElement("span");
					csp1.innerHTML = "￥" + ele.ymon;
					//原价
					var csp2 = document.createElement("span");
					csp2.innerHTML = "￥" + ele.xmon;
					li.appendChild(photo);
					li.appendChild(cname);
					li.appendChild(cmon);
					cmon.appendChild(csp1);
					cmon.appendChild(csp2);
					li.setAttribute("pid", ele.id);
					li.onclick = function() {
						var z = this.getAttribute("pid");
						location.href = "xi2.html?pid=" + z;
					}
					part3.appendChild(li);
				});
			
				arr["p3"].forEach(function(ele) {
					//创建li
					var li = document.createElement("li");
					var photo = document.createElement("i");
					//相片
					photo.className = "photo";
					photo.style = "background:url(" + ele.pic + "); background-size:100% 366px;"
					//名字
					var cname = document.createElement("p");
					cname.className = "cen-name";
					cname.innerText = ele.name;
					//价格
					var cmon = document.createElement("p");
					cmon.className = "cen-money";
					//原价
					var csp1 = document.createElement("span");
					csp1.innerHTML = "￥" + ele.ymon;
					//原价
					var csp2 = document.createElement("span");
					csp2.innerHTML = "￥" + ele.xmon;
					li.appendChild(photo);
					li.appendChild(cname);
					li.appendChild(cmon);
					cmon.appendChild(csp1);
					cmon.appendChild(csp2);
					li.setAttribute("pid", ele.id);
					li.onclick = function() {
						var z = this.getAttribute("pid");
						location.href = "xq3-1.html?pid=" + z;
					}
					part4.appendChild(li);
				});
			
				arr["p4"].forEach(function(ele) {
					//创建li
					var li = document.createElement("li");
					var photo = document.createElement("i");
					//相片
					photo.className = "photo";
					photo.style = "background:url(" + ele.pic + "); background-size:100% 366px;"
					//名字
					var cname = document.createElement("p");
					cname.className = "cen-name";
					cname.innerText = ele.name;
					//价格
					var cmon = document.createElement("p");
					cmon.className = "cen-money";
					//原价
					var csp1 = document.createElement("span");
					csp1.innerHTML = "￥" + ele.ymon;
					//原价
					var csp2 = document.createElement("span");
					csp2.innerHTML = "￥" + ele.xmon;
					li.appendChild(photo);
					li.appendChild(cname);
					li.appendChild(cmon);
					cmon.appendChild(csp1);
					cmon.appendChild(csp2);
					li.setAttribute("pid", ele.id);
					li.onclick = function() {
						var z = this.getAttribute("pid");
						location.href = "xq4-7.html?pid=" + z;
					}
					part5.appendChild(li);
				});
			
				arr["p5"].forEach(function(ele) {
					//创建li
					var li = document.createElement("li");
					var photo = document.createElement("i");
					//相片
					photo.className = "photo";
					photo.style = "background:url(" + ele.pic + "); background-size:100% 366px;"
					//名字
					var cname = document.createElement("p");
					cname.className = "cen-name";
					cname.innerText = ele.name;
					//价格
					var cmon = document.createElement("p");
					cmon.className = "cen-money";
					//原价
					var csp1 = document.createElement("span");
					csp1.innerHTML = "￥" + ele.ymon;
					//原价
					var csp2 = document.createElement("span");
					csp2.innerHTML = "￥" + ele.xmon;
					li.appendChild(photo);
					li.appendChild(cname);
					li.appendChild(cmon);
					cmon.appendChild(csp1);
					cmon.appendChild(csp2);
					li.setAttribute("pid", ele.id);
					li.onclick = function() {
						var z = this.getAttribute("pid");
						location.href = "xq4-7.html?pid=" + z;
					}
					part6.appendChild(li);
				});
			
				arr["p6"].forEach(function(ele) {
					//创建li
					var li = document.createElement("li");
					var photo = document.createElement("i");
					//相片
					photo.className = "photo";
					photo.style = "background:url(" + ele.pic + "); background-size:100% 366px;"
					//名字
					var cname = document.createElement("p");
					cname.className = "cen-name";
					cname.innerText = ele.name;
					//价格
					var cmon = document.createElement("p");
					cmon.className = "cen-money";
					//原价
					var csp1 = document.createElement("span");
					csp1.innerHTML = "￥" + ele.ymon;
					//原价
					var csp2 = document.createElement("span");
					csp2.innerHTML = "￥" + ele.xmon;
					li.appendChild(photo);
					li.appendChild(cname);
					li.appendChild(cmon);
					cmon.appendChild(csp1);
					cmon.appendChild(csp2);
					li.setAttribute("pid", ele.id);
					li.onclick = function() {
						var z = this.getAttribute("pid");
						location.href = "xq4-7.html?pid=" + z;
					}
					part7.appendChild(li);
				});
			
				arr["p7"].forEach(function(ele) {
					console.log(arr["p7"]);
					//创建li
					var li = document.createElement("li");
					var photo = document.createElement("i");
					//相片
					photo.className = "photo";
					photo.style = "background:url(" + ele.pic + "); background-size:100% 366px;"
					//名字
					var cname = document.createElement("p");
					cname.className = "cen-name";
					cname.innerText = ele.name;
					//价格
					var cmon = document.createElement("p");
					cmon.className = "cen-money";
					//原价
					var csp1 = document.createElement("span");
					csp1.innerHTML = "￥" + ele.ymon;
					//原价
					var csp2 = document.createElement("span");
					csp2.innerHTML = "￥" + ele.xmon;
					li.appendChild(photo);
					li.appendChild(cname);
					li.appendChild(cmon);
					cmon.appendChild(csp1);
					cmon.appendChild(csp2);
					li.setAttribute("pid", ele.id);
					li.onclick = function() {
						var z = this.getAttribute("pid");
						location.href = "xq4-7.html?pid=" + z;
					}
					part8.appendChild(li);
				});
			
			}
			//页面ul子元素合集
			var part2s = part2.children;
			var part3s = part3.children;
			var part5s = part5.children;
			var part6s = part6.children;
			var part7s = part7.children;
			var part8s = part8.children;
			console.log(part2s);
			
			function ScrollDo(e) {
				var e = e || window.event;
				console.log(e)
				if(e.wheelDelta > 0 || e.detail < 0) {
					console.log('向上');
					shang();
			
				} else if(e.wheelDelta < 0 || e.detail > 0) {
					console.log('向下');
					move();
			
				}
			}
			
			function move() {
				if(flag) {
					flag = false;
					if(ind == 7) {
						ind = 7;
					} else {
						ind++;
					}
					console.log("ind=" + ind);
					timer = setInterval(function() {
						var curleft = parseInt(getStyle(box, 'top'));
						//console.log(curleft);
						if(curleft == (-660 * ind)) {
							if(ind == boxLi.length) {
								clearInterval(timer);
							}
							if(curleft == (-660)) {
								for(i = 0; i < part2s.length; i++) {
									part2s[i].style.top = "0px";
								}
							}
							if(curleft == (-660 * 2)) {
								for(i = 0; i < part3s.length; i++) {
									part3s[i].style.opacity = "1";
								}
							}
							if(curleft == (-660 * 3)) {
			
								part4.style.left = "162px";
			
							}
							if(curleft == (-660 * 4)) {
								for(i = 0; i < part5s.length; i++) {
									part5s[0].style.left = "0px";
									part5s[1].style.left = "255px";
									part5s[2].style.left = "510px";
									part5s[3].style.left = "765px";
								}
			
							}
			
							if(curleft == (-660 * 5)) {
								for(i = 0; i < part6s.length; i++) {
									part6s[i].style.opacity = "1";
			
								}
							}
							if(curleft == (-660 * 6)) {
								for(i = 0; i < part7s.length; i++) {
									part7s[i].style.opacity = "1";
			
								}
							}
							if(curleft == (-660 * 7)) {
								for(i = 0; i < part8s.length; i++) {
									part8s[i].style.opacity = "1";
			
								}
							}
							flag = true;
							c();
							clearInterval(timer);
						} else {
							box.style.top = curleft - 10 + 'px';
			
						}
					}, 20)
			
				}
			}
			//			
			
			function shang() {
				if(flag) {
					flag = false;
					if(ind == 0) {
						box.style.top = '0px';
					} else {
						ind--;
					}
			
					timer = setInterval(function() {
						var curleft = parseInt(getStyle(box, 'top'));
						if(curleft == ((-660) * ind)) {
							flag = true;
							c();
							//								part.style.opacity="0";
							clearInterval(timer)
						} else {
							box.style.top = curleft + 10 + 'px';
						}
					}, 20)
				}
			}
			//圆点
			var cir = document.getElementsByClassName("cir")[0];
			cirs = cir.children;
			console.log(cirs);
			for(i = 0; i < cirs.length; i++) {
				cirs[i].onclick = function(a) {
					return function() {
						ind = a;
						c()
					}
				}(i);
			}
			
			function c() {
				for(j = 0; j < cirs.length; j++) {
					cirs[j].style = ""
				}
				var curleft = parseInt(getStyle(box, 'top'));
				box.style.top =(-660 * ind) + 'px';
				cirs[ind].style = "background: whitesmoke;box-shadow:0 0 0 2px white;";
			}
			var cut = document.getElementsByClassName("cut")[0];
			var cuts = cut.children;
			var cutl = document.getElementById("cutl");
			var cutr = document.getElementById("cutr");
			var mun = 0,
				autotimer = null;
			autotimer = setInterval(cutright, 3000);
			//进入左按钮清空定时器
			cutl.onmouseenter = function() {
				clearInterval(autotimer);
			}
			cutl.onmouseleave = function() {
				autotimer = setInterval(cutright, 3000);
			}
			//进入右按钮清空定时器
			cutr.onmouseenter = function() {
				clearInterval(autotimer);
			}
			cutr.onmouseleave = function() {
				autotimer = setInterval(cutright, 3000);
			}
			//轮播左按钮
			cutl.onclick = function() {
				mun--;
				mun <= -1 ? mun = cuts.length - 1 : mun;
				clearClass(cuts)
				addClass(cuts[mun], "act");
			
			}
			cutr.onclick = function() {
				cutright()
			}
			
			function cutright() {
				mun++;
				mun >= cuts.length ? mun = 0 : mun;
				clearClass(cuts)
				addClass(cuts[mun], "act");
			}
			
			function clearClass(arr) {
				for(var i = 0; i < arr.length; i++) {
					delClass(arr[i], "act");
				}
			}
	    </script>
	</body>
</html>
